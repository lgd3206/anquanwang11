# ç”¨æˆ·åˆ é™¤æµç¨‹æ–‡æ¡£

## ðŸ“‹ ç›®å½•
1. [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
2. [æƒé™é…ç½®](#æƒé™é…ç½®)
3. [Webç•Œé¢ä½¿ç”¨](#webç•Œé¢ä½¿ç”¨)
4. [APIæŽ¥å£è¯´æ˜Ž](#apiæŽ¥å£è¯´æ˜Ž)
5. [åˆ é™¤æµç¨‹](#åˆ é™¤æµç¨‹)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
7. [æ•…éšœæŽ’é™¤](#æ•…éšœæŽ’é™¤)

---

## åŠŸèƒ½æ¦‚è¿°

ç”¨æˆ·åˆ é™¤åŠŸèƒ½å…è®¸ç®¡ç†å‘˜**æ°¸ä¹…åˆ é™¤ç”¨æˆ·è´¦æˆ·åŠå…¶æ‰€æœ‰ç›¸å…³æ•°æ®**ï¼ŒåŒ…æ‹¬ï¼š
- ðŸ‘¤ ç”¨æˆ·è´¦æˆ·ä¿¡æ¯ï¼ˆé‚®ç®±ã€å¯†ç ã€ç§¯åˆ†ç­‰ï¼‰
- ðŸ“¥ ä¸‹è½½è®°å½•ï¼ˆdownloadsè¡¨ï¼‰
- ðŸ’° æ”¯ä»˜/ç§¯åˆ†è®°å½•ï¼ˆpaymentsè¡¨ï¼‰

### ä½¿ç”¨åœºæ™¯
- ç”¨æˆ·ä¸»åŠ¨è¯·æ±‚åˆ é™¤è´¦æˆ·
- è´¦æˆ·è¢«ç›—æˆ–å®‰å…¨å¨èƒ
- è¿è§„ç”¨æˆ·å¤„ç†
- ç³»ç»Ÿæ•°æ®æ¸…ç†
- æ³•å¾‹åˆè§„è¦æ±‚ï¼ˆGDPR "è¢«é—å¿˜æƒ"ï¼‰

### åˆ é™¤ä¸å¯æ’¤é”€ âš ï¸
**é‡è¦æç¤º**ï¼šæ­¤æ“ä½œä¼š**æ°¸ä¹…åˆ é™¤**ç”¨æˆ·åŠå…¶æ‰€æœ‰æ•°æ®ï¼Œåˆ é™¤åŽæ— æ³•æ¢å¤ã€‚å»ºè®®ï¼š
- å¯ç”¨æ•°æ®å¤‡ä»½é€‰é¡¹
- å¡«å†™æ¸…æ™°çš„åˆ é™¤åŽŸå› ï¼ˆå®¡è®¡è¿½è¸ªï¼‰
- è°¨æ…ŽéªŒè¯ç”¨æˆ·èº«ä»½ä¿¡æ¯

---

## æƒé™é…ç½®

### çŽ¯å¢ƒå˜é‡é…ç½®

åˆ é™¤åŠŸèƒ½éœ€è¦åœ¨ `.env.local` ä¸­é…ç½®ç®¡ç†å‘˜é‚®ç®±ï¼š

```env
# ç®¡ç†å‘˜é‚®ç®±åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰
ADMIN_EMAILS=admin1@example.com,admin2@example.com,1591605408@qq.com
```

### éªŒè¯æµç¨‹

æ¯æ¬¡åˆ é™¤è¯·æ±‚éƒ½ä¼šéªŒè¯è¯·æ±‚å¤´ä¸­çš„ `x-admin-email` æ˜¯å¦åœ¨é…ç½®åˆ—è¡¨ä¸­ï¼š

```
è¯·æ±‚ â†’ æå– x-admin-email å¤´éƒ¨ â†’ æ£€æŸ¥æ˜¯å¦åœ¨ ADMIN_EMAILS ä¸­ â†’ æ‰§è¡Œåˆ é™¤
```

å¦‚æžœé‚®ç®±ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œè¿”å›ž **403 Forbidden** é”™è¯¯ã€‚

---

## Webç•Œé¢ä½¿ç”¨

### è®¿é—®åœ°å€
```
https://ä½ çš„åŸŸå/admin/delete-user
```

### æ“ä½œæ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šè¾“å…¥ç®¡ç†å‘˜é‚®ç®±
åœ¨"ç®¡ç†å‘˜é‚®ç®±"å­—æ®µè¾“å…¥æ‚¨çš„ç®¡ç†å‘˜é‚®ç®±ï¼ˆéœ€é…ç½®åœ¨ `ADMIN_EMAILS` ä¸­ï¼‰

```
ç¤ºä¾‹ï¼š1591605408@qq.com
```

#### ç¬¬äºŒæ­¥ï¼šé€‰æ‹©æŸ¥æ‰¾æ–¹å¼
ä¸¤ç§æ–¹å¼é€‰æ‹©å…¶ä¸€ï¼š
- **æŒ‰é‚®ç®±** - è¾“å…¥ç”¨æˆ·æ³¨å†Œæ—¶çš„é‚®ç®±åœ°å€
- **æŒ‰ç”¨æˆ·ID** - è¾“å…¥ç”¨æˆ·IDï¼ˆæ•´æ•°ï¼‰

#### ç¬¬ä¸‰æ­¥ï¼šè¾“å…¥ç”¨æˆ·æ ‡è¯†
æ ¹æ®é€‰æ‹©çš„æŸ¥æ‰¾æ–¹å¼ï¼Œè¾“å…¥å¯¹åº”ä¿¡æ¯ï¼š

**æŒ‰é‚®ç®±ç¤ºä¾‹ï¼š**
```
user@qq.com
```

**æŒ‰IDç¤ºä¾‹ï¼š**
```
123
```

#### ç¬¬å››æ­¥ï¼šå¡«å†™åˆ é™¤åŽŸå› ï¼ˆå¯é€‰ï¼‰
å¡«å†™åˆ é™¤åŽŸå› ä¾¿äºŽåŽæœŸå®¡è®¡è¿½è¸ªï¼š

```
ç”¨æˆ·ä¸»åŠ¨è¯·æ±‚åˆ é™¤
è´¦æˆ·è¢«ç›—ï¼Œç”¨æˆ·ç”³è¯·åˆ é™¤
è¿è§„ç”¨æˆ·ï¼Œç®¡ç†å‘˜åˆ é™¤
ç³»ç»Ÿæµ‹è¯•ï¼Œåˆ é™¤æµ‹è¯•è´¦æˆ·
```

#### ç¬¬äº”æ­¥ï¼šé€‰æ‹©å¤‡ä»½é€‰é¡¹ï¼ˆå¯é€‰ï¼‰
å‹¾é€‰"å¯¼å‡ºå¤‡ä»½æ•°æ®"å¯åœ¨åˆ é™¤å‰å¤‡ä»½ç”¨æˆ·å®Œæ•´æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰

#### ç¬¬å…­æ­¥ï¼šç¡®è®¤åˆ é™¤
1. ç‚¹å‡»çº¢è‰²çš„"ðŸ—‘ï¸ ç¡®è®¤åˆ é™¤ç”¨æˆ·"æŒ‰é’®
2. æµè§ˆå™¨ä¼šå¼¹å‡ºäºŒæ¬¡ç¡®è®¤æ¡†
3. å†æ¬¡ç¡®è®¤åŽæ‰§è¡Œåˆ é™¤

#### ç¬¬ä¸ƒæ­¥ï¼šæŸ¥çœ‹ç»“æžœ
åˆ é™¤æˆåŠŸåŽä¼šæ˜¾ç¤ºï¼š

```
âœ… ç”¨æˆ·åŠå…¶æ‰€æœ‰æ•°æ®å·²æˆåŠŸåˆ é™¤

ç”¨æˆ·é‚®ç®±: user@qq.com
åˆ é™¤æ—¶é—´: 2025/12/14 10:30:45
```

#### ç¬¬å…«æ­¥ï¼šæŸ¥çœ‹åˆ é™¤åŽ†å²
é¡µé¢ä¸‹æ–¹çš„"åˆ é™¤åŽ†å²ï¼ˆæœ€è¿‘100æ¡ï¼‰"è¡¨æ ¼ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæ˜¾ç¤ºï¼š
- åˆ é™¤æ—¶é—´
- è¢«åˆ é™¤ç”¨æˆ·é‚®ç®±
- æ“ä½œçŠ¶æ€

---

## APIæŽ¥å£è¯´æ˜Ž

### ç«¯ç‚¹ä¿¡æ¯

**åŸºç¡€URLï¼š** `https://ä½ çš„åŸŸå/api/admin/delete-user`

### POST è¯·æ±‚ - åˆ é™¤ç”¨æˆ·

#### è¯·æ±‚å¤´
```
Content-Type: application/json
x-admin-email: ç®¡ç†å‘˜é‚®ç®± (å¿…éœ€)
```

#### è¯·æ±‚ä½“
```json
{
  "identifier": "user@qq.com",           // å¿…éœ€ï¼šç”¨æˆ·é‚®ç®±æˆ–ID
  "identifierType": "email",             // å¿…éœ€ï¼š'email' æˆ– 'id'
  "reason": "ç”¨æˆ·è¯·æ±‚åˆ é™¤",               // å¯é€‰ï¼šåˆ é™¤åŽŸå› 
  "backupData": true                     // å¯é€‰ï¼šæ˜¯å¦å¯¼å‡ºå¤‡ä»½æ•°æ®
}
```

#### å“åº”ç¤ºä¾‹ - æˆåŠŸ
```json
{
  "success": true,
  "message": "ç”¨æˆ·åŠå…¶æ‰€æœ‰æ•°æ®å·²æˆåŠŸåˆ é™¤",
  "deletedUser": {
    "id": 123,
    "email": "user@qq.com",
    "deletedAt": "2025-12-14T10:30:45.123Z",
    "downloadsCount": 5,
    "paymentsCount": 10
  },
  "backup": null
}
```

#### å“åº”ç¤ºä¾‹ - æƒé™ä¸è¶³
```json
{
  "success": false,
  "message": "æƒé™ä¸è¶³ï¼Œä»…ç®¡ç†å‘˜å¯æ“ä½œ"
}
```
Status: 403

#### å“åº”ç¤ºä¾‹ - ç”¨æˆ·ä¸å­˜åœ¨
```json
{
  "success": false,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨"
}
```
Status: 404

### GET è¯·æ±‚ - æŸ¥è¯¢åˆ é™¤åŽ†å²

#### è¯·æ±‚å¤´
```
x-admin-email: ç®¡ç†å‘˜é‚®ç®± (å¿…éœ€)
```

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "records": [
    {
      "id": 1,
      "deletedUserEmail": "user1@qq.com",
      "deletedAt": "2025-12-14T10:30:45.123Z",
      "pointsAdded": 0,
      "amount": 0,
      "status": "success"
    },
    {
      "id": 2,
      "deletedUserEmail": "user2@qq.com",
      "deletedAt": "2025-12-14T09:15:30.456Z",
      "pointsAdded": 0,
      "amount": 0,
      "status": "success"
    }
  ],
  "total": 2
}
```

### cURL ç¤ºä¾‹

#### åˆ é™¤ç”¨æˆ·ï¼ˆæŒ‰é‚®ç®±ï¼‰
```bash
curl -X POST https://ä½ çš„åŸŸå/api/admin/delete-user \
  -H "Content-Type: application/json" \
  -H "x-admin-email: 1591605408@qq.com" \
  -d '{
    "identifier": "test@qq.com",
    "identifierType": "email",
    "reason": "ç”¨æˆ·è¯·æ±‚åˆ é™¤",
    "backupData": false
  }'
```

#### åˆ é™¤ç”¨æˆ·ï¼ˆæŒ‰IDï¼‰
```bash
curl -X POST https://ä½ çš„åŸŸå/api/admin/delete-user \
  -H "Content-Type: application/json" \
  -H "x-admin-email: 1591605408@qq.com" \
  -d '{
    "identifier": "123",
    "identifierType": "id",
    "reason": "è¿è§„ç”¨æˆ·å¤„ç†",
    "backupData": true
  }'
```

#### æŸ¥è¯¢åˆ é™¤åŽ†å²
```bash
curl https://ä½ çš„åŸŸå/api/admin/delete-user \
  -H "x-admin-email: 1591605408@qq.com"
```

---

## åˆ é™¤æµç¨‹

### æ—¶åºå›¾

```
ç®¡ç†å‘˜                      ç³»ç»Ÿ                    æ•°æ®åº“
   |                        |                        |
   |--å¡«å†™åˆ é™¤è¡¨å•---------->|                        |
   |                        |                        |
   |<--æ˜¾ç¤ºç¡®è®¤æ¡†-----------|                        |
   |                        |                        |
   |--ç‚¹å‡»"ç¡®è®¤åˆ é™¤"-------->|                        |
   |                        |                        |
   |                        |--éªŒè¯ç®¡ç†å‘˜æƒé™-------->|
   |                        |<-----éªŒè¯é€šè¿‡----------|
   |                        |                        |
   |                        |--æŸ¥æ‰¾ç”¨æˆ·---------->|
   |                        |<-----è¿”å›žç”¨æˆ·ä¿¡æ¯---|
   |                        |                        |
   |                        |--åˆ é™¤ä¸‹è½½è®°å½•-------->|
   |                        |<-----å®Œæˆ----------|
   |                        |                        |
   |                        |--åˆ é™¤æ”¯ä»˜è®°å½•-------->|
   |                        |<-----å®Œæˆ----------|
   |                        |                        |
   |                        |--åˆ é™¤ç”¨æˆ·è´¦æˆ·-------->|
   |                        |<-----å®Œæˆ----------|
   |                        |                        |
   |<--æ˜¾ç¤ºæˆåŠŸæç¤º---------|                        |
   |                        |                        |
```

### æ•°æ®åˆ é™¤é¡ºåº

1. **éªŒè¯æƒé™** âœ“
   - æ£€æŸ¥ `x-admin-email` æ˜¯å¦åœ¨ `ADMIN_EMAILS` ä¸­
   - å¦‚æžœå¤±è´¥ï¼Œè¿”å›ž 403 é”™è¯¯å¹¶åœæ­¢

2. **æŸ¥æ‰¾ç”¨æˆ·** âœ“
   - æŒ‰é‚®ç®±æˆ–IDæŸ¥æ‰¾ç”¨æˆ·
   - å¦‚æžœä¸å­˜åœ¨ï¼Œè¿”å›ž 404 é”™è¯¯å¹¶åœæ­¢
   - åŒæ—¶åŠ è½½ç”¨æˆ·çš„ downloads å’Œ payments å…³è”æ•°æ®

3. **åˆ é™¤ä¸‹è½½è®°å½•** âœ“
   - åˆ é™¤è¯¥ç”¨æˆ·çš„æ‰€æœ‰ Download è®°å½•
   - åŒ…æ‹¬æ‰€æœ‰ä¸‹è½½åŽ†å²å’Œæ¶ˆè´¹çš„ç§¯åˆ†è®°å½•

4. **åˆ é™¤æ”¯ä»˜è®°å½•** âœ“
   - åˆ é™¤è¯¥ç”¨æˆ·çš„æ‰€æœ‰ Payment è®°å½•
   - åŒ…æ‹¬ç§¯åˆ†å……å€¼ã€èµ é€ã€æ¶ˆè´¹ç­‰æ‰€æœ‰äº¤æ˜“è®°å½•

5. **åˆ é™¤ç”¨æˆ·è´¦æˆ·** âœ“
   - åˆ é™¤ User è®°å½•
   - åŒ…æ‹¬é‚®ç®±ã€å¯†ç ã€ç§¯åˆ†ç­‰æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯

6. **è¿”å›žæˆåŠŸå“åº”** âœ“
   - è¿”å›žåˆ é™¤çš„ç”¨æˆ·ä¿¡æ¯
   - åŒ…æ‹¬è¢«åˆ é™¤æ•°æ®çš„æ•°é‡ç»Ÿè®¡

### äº‹åŠ¡ä¿è¯

åˆ é™¤æ“ä½œä½¿ç”¨ Prisma çš„äº‹åŠ¡æœºåˆ¶ç¡®ä¿**åŽŸå­æ€§**ï¼š
- è¦ä¹ˆå…¨éƒ¨åˆ é™¤æˆåŠŸ
- è¦ä¹ˆå…¨éƒ¨å¤±è´¥å¹¶å›žæ»š

å³ä½¿åœ¨åˆ é™¤è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œæ•°æ®åº“ä¹Ÿä¸ä¼šå¤„äºŽä¸ä¸€è‡´çŠ¶æ€ã€‚

---

## å¸¸è§é—®é¢˜

### Q1ï¼šå¦‚ä½•èŽ·çŸ¥ç”¨æˆ·çš„IDï¼Ÿ
**Aï¼š** æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼èŽ·å–ç”¨æˆ·IDï¼š
- ä½¿ç”¨ `/admin/points-history` é¡µé¢æŸ¥çœ‹ç§¯åˆ†åŽ†å²ä¸­çš„ç”¨æˆ·ID
- è¿žæŽ¥æ•°æ®åº“ç›´æŽ¥æŸ¥è¯¢ï¼š`SELECT id, email FROM users WHERE email = 'user@qq.com';`
- è°ƒç”¨ `/api/user/profile` APIï¼ˆéœ€è¦ç”¨æˆ·JWT tokenï¼‰

### Q2ï¼šåˆ é™¤åŽå¯ä»¥æ¢å¤å—ï¼Ÿ
**Aï¼š** **ä¸å¯ä»¥**ã€‚åˆ é™¤æ“ä½œä¼šæ°¸ä¹…ç§»é™¤æ‰€æœ‰æ•°æ®ï¼Œæ— æ³•æ¢å¤ã€‚å»ºè®®åœ¨åˆ é™¤å‰ï¼š
- å¤‡ä»½ç”¨æˆ·æ•°æ®
- ç¡®ä¿è¿™ç¡®å®žæ˜¯ç®¡ç†å‘˜çš„æ„å›¾
- è®°å½•åˆ é™¤åŽŸå› ä¾¿äºŽå®¡è®¡

### Q3ï¼šåˆ é™¤ç”¨æˆ·åŽï¼Œè¯¥é‚®ç®±å¯ä»¥é‡æ–°æ³¨å†Œå—ï¼Ÿ
**Aï¼š** **å¯ä»¥**ã€‚User è¡¨çš„ email å­—æ®µè®¾ç½®äº† `@unique` çº¦æŸï¼Œä½†åˆ é™¤ç”¨æˆ·åŽè¯¥é‚®ç®±è¢«é‡Šæ”¾ï¼Œå¯ä»¥ç”¨æ–°å¯†ç é‡æ–°æ³¨å†Œã€‚

### Q4ï¼šåˆ é™¤ç”¨æˆ·ä¼šå½±å“å…¶ä»–ç”¨æˆ·å—ï¼Ÿ
**Aï¼š** **ä¸ä¼š**ã€‚åˆ é™¤æ“ä½œåªå½±å“è¯¥ç”¨æˆ·åŠå…¶å…³è”çš„æ•°æ®ï¼š
- Downloadsï¼ˆè¯¥ç”¨æˆ·çš„ä¸‹è½½è®°å½•ï¼‰
- Paymentsï¼ˆè¯¥ç”¨æˆ·çš„æ”¯ä»˜è®°å½•ï¼‰
- User æœ¬èº«

å…¶ä»–ç”¨æˆ·çš„æ•°æ®ä¸å—å½±å“ã€‚

### Q5ï¼šå¦‚ä½•åœ¨åˆ é™¤å‰å¤‡ä»½ç”¨æˆ·æ•°æ®ï¼Ÿ
**Aï¼š** åœ¨ Web ç•Œé¢ä¸Šå‹¾é€‰"å¯¼å‡ºå¤‡ä»½æ•°æ®"é€‰é¡¹ï¼Œç³»ç»Ÿä¼šåœ¨åˆ é™¤å‰å¯¼å‡ºç”¨æˆ·çš„å®Œæ•´æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰ï¼ŒåŒ…å«ï¼š
- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- ä¸‹è½½è®°å½•åˆ—è¡¨
- æ”¯ä»˜è®°å½•åˆ—è¡¨
- å¯¼å‡ºæ—¶é—´æˆ³

### Q6ï¼šåˆ é™¤åŽ†å²ä¼šè¢«ä¿ç•™å¤šä¹…ï¼Ÿ
**Aï¼š** åˆ é™¤åŽ†å²è®°å½•å­˜å‚¨åœ¨ Payment è¡¨ä¸­ï¼ˆ`paymentMethod='admin_delete'`ï¼‰ï¼Œä¸Žå…¶ä»–æ”¯ä»˜è®°å½•ä¸€æ ·é•¿æœŸä¿ç•™ï¼Œä¾¿äºŽå®¡è®¡è¿½è¸ªã€‚

### Q7ï¼šæ”¯æŒæ‰¹é‡åˆ é™¤å—ï¼Ÿ
**Aï¼š** ç›®å‰ä¸æ”¯æŒæ‰¹é‡åˆ é™¤ã€‚å¦‚éœ€åˆ é™¤å¤šä¸ªç”¨æˆ·ï¼Œè¯·é€ä¸ªæ“ä½œã€‚åŽç»­å¯è€ƒè™‘æ·»åŠ æ‰¹é‡åˆ é™¤åŠŸèƒ½ã€‚

### Q8ï¼šæƒé™é…ç½®é”™è¯¯ä¼šæ€Žæ ·ï¼Ÿ
**Aï¼š** å¦‚æžœ `ADMIN_EMAILS` æœªé…ç½®æˆ–é…ç½®é”™è¯¯ï¼š
- æ‰€æœ‰ç®¡ç†å‘˜éƒ½ä¼šæ”¶åˆ°"æƒé™ä¸è¶³"é”™è¯¯
- æ— æ³•æ‰§è¡Œåˆ é™¤æ“ä½œ
- éœ€è¦é€šè¿‡ Vercel çŽ¯å¢ƒå˜é‡é‡æ–°é…ç½®å¹¶é‡æ–°éƒ¨ç½²

---

## æ•…éšœæŽ’é™¤

### é—®é¢˜1ï¼šæ˜¾ç¤º"æƒé™ä¸è¶³ï¼Œä»…ç®¡ç†å‘˜å¯æ“ä½œ"

**åŽŸå› ï¼š** è¾“å…¥çš„é‚®ç®±ä¸åœ¨ `ADMIN_EMAILS` ä¸­

**è§£å†³ï¼š**
1. ç¡®è®¤è¾“å…¥çš„é‚®ç®±æ˜¯å¦æ­£ç¡®ï¼ˆæ£€æŸ¥å¤§å°å†™ã€ç©ºæ ¼ï¼‰
2. åœ¨ Vercel Dashboard ä¸­æ£€æŸ¥ `ADMIN_EMAILS` çŽ¯å¢ƒå˜é‡è®¾ç½®
3. å¦‚æžœä¿®æ”¹äº†çŽ¯å¢ƒå˜é‡ï¼Œéœ€è¦é‡æ–°éƒ¨ç½²åº”ç”¨

```env
# Vercel çŽ¯å¢ƒå˜é‡ç¤ºä¾‹
ADMIN_EMAILS=admin1@example.com,admin2@example.com,1591605408@qq.com
```

### é—®é¢˜2ï¼šæ˜¾ç¤º"ç”¨æˆ·ä¸å­˜åœ¨"

**åŽŸå› ï¼š** è¾“å…¥çš„é‚®ç®±æˆ–IDå¯¹åº”çš„ç”¨æˆ·ä¸å­˜åœ¨

**è§£å†³ï¼š**
1. æ£€æŸ¥è¾“å…¥çš„é‚®ç®±æˆ–IDæ˜¯å¦æ­£ç¡®
2. å¦‚æžœä½¿ç”¨IDï¼Œç¡®ä¿æ˜¯æ•´æ•°æ ¼å¼ï¼ˆå¦‚ `123` è€Œä¸æ˜¯ `user123`ï¼‰
3. ç”¨åŒæ ·çš„é‚®ç®±å°è¯•ç™»å½•ï¼Œç¡®è®¤ç”¨æˆ·æ˜¯å¦å­˜åœ¨

### é—®é¢˜3ï¼šåˆ é™¤åŽæ˜¾ç¤ºé”™è¯¯"æœåŠ¡å™¨é”™è¯¯"

**åŽŸå› ï¼š** æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**è§£å†³ï¼š**
1. æ£€æŸ¥ Vercel éƒ¨ç½²æ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹æµè§ˆå™¨æŽ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚ï¼Œæ£€æŸ¥ API å“åº”
3. ç¡®è®¤æ•°æ®åº“è¿žæŽ¥æ˜¯å¦æ­£å¸¸
4. å¦‚é—®é¢˜æŒç»­ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒ

### é—®é¢˜4ï¼šåˆ é™¤åŽ†å²è¡¨ä¸æ˜¾ç¤º

**åŽŸå› ï¼š**
- è¿˜æ²¡æœ‰æ‰§è¡Œè¿‡åˆ é™¤æ“ä½œ
- æƒé™éªŒè¯å¤±è´¥
- ç½‘ç»œè¿žæŽ¥é—®é¢˜

**è§£å†³ï¼š**
1. ç¡®ä¿å·²è¾“å…¥ç®¡ç†å‘˜é‚®ç®±
2. ç‚¹å‡»"ðŸ”„ åˆ·æ–°"æŒ‰é’®é‡æ–°åŠ è½½
3. æ£€æŸ¥æµè§ˆå™¨æŽ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
4. ç¡®è®¤ç½‘ç»œè¿žæŽ¥æ­£å¸¸

### é—®é¢˜5ï¼šé¡µé¢åŠ è½½ç¼“æ…¢æˆ–è¶…æ—¶

**åŽŸå› ï¼š** ç½‘ç»œå»¶è¿Ÿæˆ–æœåŠ¡å™¨å“åº”æ…¢

**è§£å†³ï¼š**
1. ç­‰å¾…å‡ ç§’åŽé‡è¯•
2. åˆ·æ–°é¡µé¢
3. æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
4. å¦‚æžœä½¿ç”¨APIï¼Œå¢žåŠ è¯·æ±‚è¶…æ—¶æ—¶é—´

---

## å®‰å…¨å»ºè®®

### 1. å¼ºçƒˆå»ºè®®å¯ç”¨æ•°æ®å¤‡ä»½
```
â˜‘ å¯¼å‡ºå¤‡ä»½æ•°æ®
```

### 2. å§‹ç»ˆå¡«å†™åˆ é™¤åŽŸå› 
ä¾¿äºŽå®¡è®¡è¿½è¸ªå’Œè´£ä»»è¿½æº¯ï¼š
```
ç”¨æˆ·ä¸»åŠ¨è¯·æ±‚åˆ é™¤è´¦æˆ·
```

### 3. å®šæœŸå®¡è®¡åˆ é™¤åŽ†å²
å®šæœŸæ£€æŸ¥åˆ é™¤åŽ†å²è¡¨ï¼Œç¡®è®¤æ‰€æœ‰åˆ é™¤æ“ä½œéƒ½æ˜¯åˆç†çš„

### 4. é™åˆ¶ç®¡ç†å‘˜æƒé™
åªå°†å¿…è¦çš„é‚®ç®±æ·»åŠ åˆ° `ADMIN_EMAILS`ï¼Œé¿å…æƒé™è¿‡åº¦åˆ†æ•£

### 5. ä¿å­˜åˆ é™¤å¤‡ä»½æ•°æ®
å¦‚æžœå¯ç”¨äº†æ•°æ®å¯¼å‡ºï¼Œä¿å­˜å¯¼å‡ºçš„ JSON æ•°æ®ä»¥å¤‡æ³•å¾‹çº çº·æ—¶ä½¿ç”¨

---

## åˆè§„æ€§è¯´æ˜Ž

æœ¬åŠŸèƒ½è®¾è®¡ç¬¦åˆä»¥ä¸‹æ³•å¾‹è¦æ±‚ï¼š

### GDPRï¼ˆæ¬§ç›Ÿé€šç”¨æ•°æ®ä¿æŠ¤æ¡ä¾‹ï¼‰
- âœ… æ”¯æŒç”¨æˆ·"è¢«é—å¿˜æƒ"
- âœ… å®Œæ•´çš„æ•°æ®åˆ é™¤
- âœ… åˆ é™¤æ“ä½œå¯è¿½è¸ª

### CCPAï¼ˆåŠ å·žæ¶ˆè´¹è€…éšç§æ³•ï¼‰
- âœ… ç”¨æˆ·å¯è¯·æ±‚åˆ é™¤ä¸ªäººä¿¡æ¯
- âœ… çº§è”åˆ é™¤ç¡®ä¿æ•°æ®å®Œæ•´æ€§
- âœ… ä¿ç•™å®¡è®¡æ—¥å¿—

### ä¸­å›½ã€Šä¸ªäººä¿¡æ¯ä¿æŠ¤æ³•ã€‹
- âœ… æ”¯æŒç”¨æˆ·æ³¨é”€è´¦æˆ·
- âœ… å½»åº•åˆ é™¤ä¸ªäººä¿¡æ¯
- âœ… å®Œæ•´çš„æ“ä½œè®°å½•

---

## æŠ€æœ¯ç»†èŠ‚

### æ•°æ®åº“æ¨¡åž‹

#### User è¡¨
```sql
DELETE FROM users WHERE id = ?;
```

#### Download è¡¨ï¼ˆçº§è”åˆ é™¤ï¼‰
```sql
DELETE FROM downloads WHERE userId = ?;
```

#### Payment è¡¨ï¼ˆçº§è”åˆ é™¤ï¼‰
```sql
DELETE FROM payments WHERE userId = ?;
```

### API ç«¯ç‚¹å®žçŽ°

**æ–‡ä»¶ä½ç½®ï¼š** `app/api/admin/delete-user/route.ts`

**åŠŸèƒ½ï¼š**
- POST æ–¹æ³•ï¼šåˆ é™¤ç”¨æˆ·
- GET æ–¹æ³•ï¼šæŸ¥è¯¢åˆ é™¤åŽ†å²

**è®¤è¯æ–¹å¼ï¼š** å¤´éƒ¨éªŒè¯ `x-admin-email`

### Web ç•Œé¢å®žçŽ°

**æ–‡ä»¶ä½ç½®ï¼š** `app/admin/delete-user/page.tsx`

**åŠŸèƒ½ï¼š**
- åˆ é™¤ç”¨æˆ·è¡¨å•
- åˆ é™¤åŽ†å²å±•ç¤º
- å¿«é€ŸæŒ‡å—é¢æ¿
- å®žæ—¶é”™è¯¯æç¤º

---

## ç‰ˆæœ¬åŽ†å²

### v1.0 - 2025å¹´12æœˆ14æ—¥
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ”¯æŒæŒ‰é‚®ç®±æˆ–IDåˆ é™¤ç”¨æˆ·
- âœ… Web ç•Œé¢å’Œ API æŽ¥å£å®Œæ•´
- âœ… åˆ é™¤åŽ†å²æŸ¥è¯¢
- âœ… æ•°æ®å¤‡ä»½é€‰é¡¹

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»ï¼š
- ðŸ“§ é‚®ç®±ï¼š1591605408@qq.com
- ðŸ’¬ QQï¼š1591605408

---

**æœ€åŽæ›´æ–°ï¼š2025å¹´12æœˆ14æ—¥**

ðŸ” æ­¤åŠŸèƒ½ä»…ä¾›æŽˆæƒç®¡ç†å‘˜ä½¿ç”¨ï¼Œè¯·å¦¥å–„ä¿ç®¡ç®¡ç†å‘˜é‚®ç®±å’Œå¯†ç ã€‚
