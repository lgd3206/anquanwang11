# 积分系统完善说明

## 功能概述

已完善资源导入时的积分设置功能，管理员可以根据资料价值为每个资源单独设置消耗积分。

## 分类积分范围

不同分类的资源有不同的推荐积分范围：

| 分类 | 最小积分 | 最大积分 | 默认积分 | 说明 |
|------|---------|---------|---------|------|
| 安全课件 | 5 | 20 | 10 | PPT、培训课件等 |
| 标准规范 | 1 | 15 | 5 | 国家标准、行业规范等 |
| 事故调查报告 | 1 | 10 | 5 | 各类事故调查报告 |
| 事故警示视频 | 3 | 20 | 10 | 警示教育视频 |
| 安全管理书籍 | 10 | 60 | 30 | 电子书、专业书籍等 |

## 使用方法

### 1. 导入资源

访问管理后台资源导入页面：`https://www.sora3ai.online/admin/import`

### 2. 解析资源

粘贴资源信息后点击"解析资源"，系统会：
- 自动识别资源分类
- 根据分类设置默认积分
- 显示预览信息

### 3. 编辑积分

在"编辑资源信息"区域，每个资源都有"消耗积分"输入框：
- 显示当前分类的推荐范围
- 可以手动修改积分值
- 系统会限制在推荐范围内（前端提示，后端不强制）
- 更换分类时，积分会自动更新为新分类的默认值

### 4. 确认导入

检查所有资源的积分设置后，点击"确认导入"完成导入。

## 功能特点

1. **智能默认值**：根据分类自动设置合理的默认积分
2. **范围提示**：实时显示当前分类的推荐积分范围
3. **灵活调整**：管理员可根据资料价值自由调整
4. **自动更新**：切换分类时积分自动更新为新分类默认值

## 示例

导入一个高价值的事故调查报告：
1. 解析后默认积分为 5 点
2. 如果是特别重大事故报告（如腾龙芳烃爆炸），可以调整为 8-10 点
3. 如果是普通一般事故报告，保持 3-5 点即可

## 技术实现

- 前端：`app/admin/import/page.tsx` 添加积分输入和范围提示
- 类型定义：`lib/resourceParser.ts` 添加 `pointsCost` 字段
- 后端验证：`lib/validation.ts` 已支持 0-10000 的积分范围
- 数据库：资源表已有 `pointsCost` 字段

## 注意事项

1. 积分范围仅作为推荐，实际可设置 0-10000
2. 前端会提示推荐范围，但不会强制限制
3. 建议根据资料稀缺性、价值、质量综合评估设置积分
